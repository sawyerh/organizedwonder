@import 'globals';

/*	Mobile
 ***************************************************************************/
@media only screen and (max-width: 570px) {

    // Flexbox
    .wrap{
        min-width: 0;
        width: 100%;
        padding: 0 20px;
    }

    .auth-wrap, .wrap{
        @include flexbox;
    }

    // ----------------------------------
    //      Type and general styling
    // ----------------------------------

    h1{
        font-size: 20px;
    }

    // ----------------------------------
    //      Header
    // ----------------------------------
    header.primary{
        height: auto;
        margin-bottom: $gutter;

        .wrap{
            padding: 0;
        }

        nav{
            display: none;
            overflow: visible !important;
        }

        ul{
            position: relative;
            width: 100%;
            bottom: auto;
            padding-top: 50px;
            float: none;
            text-align: center;

            a, span{
                display: inline-block;
                padding: 15px 10px;
            }

            img{
                display: none;
            }

            li ul{
                @include border-radius(0 0 4px 4px);
                left: auto;
                right: 10px;
                top: 43px;
                padding-top: 0;
            }
        }

        .parent > a{
            @include border-radius(4px 4px 0 0);
            padding-right: 15px;
        }

        .search{
            position: absolute;
            top: 20px;
            left: 20px;
            right: 20px;
            margin: 0;
            width: auto;
        }
    }

    .logo{
        margin: 0;
        position: relative;
        width: 100%;
        float: none;
        text-align: left;
        padding-left: 20px;
        padding-right: 100px;

        .nav-toggle{
            display: block;
            width: 60px;
            padding: 10px;
            position: absolute;
            right: 0;
            top: 0;
            bottom: 0;
            z-index: 20;
            cursor: pointer;

            span{
                $block_height: 3px;
                $block_bg: rgba(#fff, 0.95);

                display: block;
                height: $block_height;
                background: $block_bg;
                position: absolute;
                left: 10px;
                right: 10px;
                top: 50%;
                margin-top: -($block_height/2);

                &:after, &:before{
                    content: '';
                    display: block;
                    height: $block_height;
                    background: $block_bg;
                    position: absolute;
                    left: 0;
                    right: 0;
                    top: 8px;
                }

                &:before{
                    top: auto;
                    bottom: 8px;
                }
            }
        }
    }

    // ----------------------------------
    //      Sidebar
    // ----------------------------------
    .sidebar{
        @include box-ordinal-group(2);
        margin-top: $gutter*2;
    }

    .sidebar.user-sidebar{
        @include box-ordinal-group(1);
        margin: 0 0 $gutter;
        padding: 0;
        background: none;
        overflow: hidden;
        border-bottom: 1px solid $border_color;
        padding-bottom: $gutter;

        .widget{
            float: right;
            width: 70%;
            margin: 0;
            padding: 0;
            background: none;
            border: 0 none;
        }

        .user-widget{
            padding: 0;
            float: left;
            width: 25%;
            margin-right: 5%;

            img{
                @include border-radius;
            }
        }

        .buttons{
            margin: 0;
        }

        .meta{
            margin-top: 10px;
            font-size: 16px;

            span{
                font-size: 16px;
                left: 0;
            }
        }
    }

    ul.tags{
        li{
            display: inline-block;
            margin: 0 10px 10px 0;
        }

        a{
            padding: 7px 15px;
        }
    }

    div.page, .sidebar{
        width: 100%;
        float: none;
    }

    .user-list .button{
        min-width: 0;
    }

    // ----------------------------------
    //      Videos
    // ----------------------------------
    .featured-videos{
        margin-bottom: $gutter*2;

        article{
            opacity: 1;

            a{
                padding-top: 100%;
            }

            h1{
                opacity: 1;
                //font-size: 16px;
            }
        }

        .bw{
            display: none;
        }

        .color{
            opacity: 1;
        }
    }

    .videos{
        header{ // filters
            @include border-radius;
            background: $widget_bg;
            padding: 10px 5px;
            text-align: center;
            font-size: 12px;
        }

        article{
            @include clearfix;
            width: 100%;
            float: none;
            margin: 0 0 10px;
            padding-bottom: 10px;
            border-bottom: $border;

            &:last-child{
                margin-bottom: 0;
                padding-bottom: 0;
                border-bottom: 0;
            }

            .thumb{
                padding-top: 20%;
                width: 25%;
                float: left;
            }

            h1{
                font-size: 14px;
                margin: 0;
            }

            p{
                font-size: 12px;
            }

            h1, p{
                width: 75%;
                float: right;
                padding-left: 10px;
            }

            .saves{
                display: none;
            }
        }
    }

    body.video{
        .sidebar{
            .tags li{
                display: inline-block;
                margin-bottom: 7px;
            }
        }

        .user img{
            width: 43px;
            margin-right: 10px;
        }
    }

    .other-videos{
        article{
            margin: 0 2% 0 0;
            width: 32%;

            h1{
                white-space: normal;
                margin-bottom: 5px;
            }

            h1, p{
                padding: 0 5px 0 0;
            }
        }

        .user-block{
            width: 100%;
            float: none;
            margin-bottom: 10px;
            font-size: 14px;

            a{
                display: inline;
            }
        }

    }

    .entry{
        font-size: $large_body - 1;
    }

    .meta{
        span{
            left: -2px;
        }
    }

    .pagination{
        @include clearfix;

        > span{
            display: none;
            margin: 0;
        }

        .next, .prev{
            display: block;
            width: 48%;
            float: left;
        }

        a{
            background: $emphasis_color;
            color: #fff;
            font-weight: bold;
            font-size: 32px;
            display: block;
            line-height: 0.6;

            &:hover{
                background: $dark_highlight;
                color: #fff;
            }
        }

        .next{
            float: right;
            margin-left: 4%;
        }
    }

    // ----------------------------------
    //      Login / Sign up
    // ----------------------------------
    body.authenticate{
        .page{
            h1{
                margin-bottom: 15px;
            }
            form{
                @include box-ordinal-group(2);
                width: auto;
                float: none;
                border-right: 0 none;
                padding-right: 0;
                margin-right: 0;
            }

            .button{
                margin: 0;
                text-indent: -9999px;
                background-position: center center;
            }
        }
    }

    .auth-wrap .social-options{
        width: auto;
        float: none;
        margin-top: 0 !important;
        margin-bottom: $gutter;
        padding-bottom: $gutter;
        border-bottom: $border;

        p{
            width: 48%;
            margin: 0 4% 0 0;
            float: left;

            &:last-child{
                margin-right: 0;
            }
        }


    }

    // ----------------------------------
    //      Popover
    // ----------------------------------
    .popover-bg{
        display: none !important;
    }
    .popover{
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        height: 100%;
        width: 100%;
        margin: 0;

        .main{
            bottom: 0;
            float: none;
            height: 100%;
            margin: 0;
            overflow: auto;
            position: absolute;
            top: 0;
            width: 100%;
            z-index: 1000;
        }

        aside{
            display: none;
        }
    }

    // ----------------------------------
    //      Footer
    // ----------------------------------
    footer.primary{
        display: none; // otherwise this displays above the sidebar in one column design
    }
    footer.small-screen{
        display: block;
        padding: $gutter 0;
        margin: $gutter;
        text-align: center;

        p, .fr{
            float: none;
            margin: 0 0 5px;
        }

        .fr{
            display: block;
            padding-top: 10px;
        }

    }
}

/*	Bookmarklet
 ***************************************************************************/
@media only screen and (max-width: 350px){
    body.new-video{
      header.primary, footer.primary, .sidebar{
        display: none;
      }

      @include popover_header;

      .wrap{
          width: 100%;
          min-width: 0;
          padding: 0;
      }

      .page{
          width: 100%;
          float: none;
      }

      #new_video{ // form
          width: 100%;

          .tag-tip{
              top: 0;
              right: 0;
          }

          input[type="text"].tags{
            padding-right: 8px;
          }
      }

      form{
        @include clearfix;
        padding: 0 $gutter $gutter;

        p{
            @include clearfix;
            display: block;
            line-height: 1;
            margin-bottom: 15px;
            position: relative;

            &:last-child{
                margin-bottom: 0;
            }
        }
    }

        input, textarea{
          width: 100%;
          float: none;
        }

        footer{
          display: none;
        }

        .success{
          text-align: center;
        }

        .autofill{
            top: 27px;
        }

        .button{
          display: block;
          width: 85%;
          max-width: 300px;
          margin: 10px auto !important;
        }
    }
}

/*	Retina display
 ***************************************************************************/
@media only screen and (-webkit-min-device-pixel-ratio : 1.5),
only screen and (min-device-pixel-ratio : 1.5) {
    body:after {
        content: 'retina';
        display: none;
    }
}